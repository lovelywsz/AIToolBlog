import{_,i as w,c as b,m as v}from"./index-G82DOdH0.js";import{u as V}from"./useNavToHome-DBcw3sbK.js";import{b as n,c as i,d as k,e as x}from"./element-plus-yQA3I_5B.js";import{Z as y,r as F,ah as I,m as h,p as S,U as o,O as r,u as a,S as m,ax as E,ay as B,q as N}from"./vue-ChzjY1xf.js";const R=t=>(E("data-v-83c5fed9"),t=t(),B(),t),U={class:"login-page"},q=R(()=>N("div",{class:"title"},"用户登录",-1)),C={__name:"LoginView",setup(t){const p=w();V(),b("登录");const s=y({username:"",password:""}),c={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:10,message:"密码长度在 5 到 10 个字符",trigger:"blur"}]},u=F(),g=async d=>{try{await d.validate()}catch{return console.log("Form validation failed"),!1}try{const{token:e}=await v(s);localStorage.setItem("token",e),p.push("/")}catch(e){console.log("Login failed:",e)}};return(d,e)=>{const f=I("router-link");return h(),S("div",U,[q,o(a(x),{model:s,rules:c,ref_key:"loginFormRef",ref:u,class:"login-form","label-width":"100px"},{default:r(()=>[o(a(n),{label:"用户名",prop:"username"},{default:r(()=>[o(a(i),{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),clearable:""},null,8,["modelValue"])]),_:1}),o(a(n),{label:"密码",prop:"password"},{default:r(()=>[o(a(i),{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),o(a(n),null,{default:r(()=>[o(a(k),{type:"primary",onClick:e[2]||(e[2]=l=>g(u.value))},{default:r(()=>[m("登录")]),_:1})]),_:1}),o(a(n),null,{default:r(()=>[o(f,{to:"/register"},{default:r(()=>[m("还没有账号？立即注册")]),_:1})]),_:1})]),_:1},8,["model"])])}}},z=_(C,[["__scopeId","data-v-83c5fed9"]]);export{z as default};
